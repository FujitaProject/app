<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>サイバー防衛ゲーム</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="start-screen" class="screen">
      <h1 class="card-title">Cyber Safety Quiz</h1>
      <p class="card-sub">画像流出とフィッシングを見抜けるか？</p>
      <button class="primary" onclick="nextScreen()">スタート</button>
    </div>

    <div id="story-screen" class="screen hidden">
      <h1 class="card-title">ミッション</h1>
      <div class="illustration" aria-hidden="true">
        <svg viewBox="0 0 120 120">
          <rect x="10" y="18" width="100" height="64" rx="6" ry="6"/>
          <path class="shield" d="M60 38c18 0 24 6 24 6v16c0 16-12 26-24 32-12-6-24-16-24-32V44s6-6 24-6z"/>
          <rect class="bang" x="56" y="46" width="8" height="26" rx="3"/>
          <rect class="bang" x="56" y="76" width="8" height="8" rx="2"/>
        </svg>
      </div>
      <p class="card-sub">教官の指示に従い、全6問をクリアせよ。</p>
      <button class="primary" onclick="nextScreen()">次へ</button>
    </div>

    <div id="intro-ally-screen" class="screen hidden character-screen">
      <h1 class="card-title">教官</h1>
      <div class="dialogue-area">
        <p id="ally-dialogue"></p>
        <button class="primary" onclick="nextScreen()">次へ</button>
      </div>
    </div>

    <div id="intro-enemy-screen" class="screen hidden character-screen">
      <h1 class="card-title">敵</h1>
      <div class="dialogue-area">
        <p id="enemy-dialogue"></p>
        <button class="primary" onclick="startQuizLoop()">始める</button>
      </div>
    </div>

    <div id="quiz-screen" class="screen hidden">
      <h1 class="card-title" id="card-heading">問題</h1>

      <div class="question-area">
        <p id="question-text" class="question-text">問題文</p>
        <!-- 画像がある問題だけ表示 -->
        <img id="question-image" src="" alt="問題画像" class="hidden"/>
      </div>

      <div id="options" class="options"></div>
      <button id="submit-btn" class="primary wide" onclick="submitAnswer()" disabled>回答する</button>
    </div>

    <div id="result-screen" class="screen hidden result-animation-container">
      <div id="battle-animation" class="battle-animation"></div>
      <div class="result-feedback">
        <p id="result-message"></p>
        <p id="explanation-text" class="explain"></p>
        <button class="primary wide" onclick="nextQuizOrEnding()">次へ</button>
      </div>
    </div>

    <div id="ending-screen" class="screen hidden">
      <h1 class="card-title">ミッション完了！</h1>
      <p id="final-score" class="score"></p>
      <p id="title-display" class="title"></p>
      <button class="secondary" onclick="location.reload()">もう一度</button>
    </div>

    <script src="script.js"></script>
  </body>
</html>
